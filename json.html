<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Корзина товаров</title>
<!-- Подключение стилей -->
<link rel="stylesheet" href="style.css" />
<link rel="preconnect" href="https://fonts.googleapis.com" />
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
<link href="https://fonts.googleapis.com/css2?family=Lato&display=swap" rel="stylesheet" />
<style>
  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    font-family: 'Lato', sans-serif;
  }

  .cart-box {
    padding: 20px;
    display: flex;
    flex-wrap: wrap;
    gap: 20px;
  }

  .item {
    width: 300px;
    background: #fff;
    box-shadow: 0 4px 8px rgba(0,0,0,0.1);
    padding: 16px;
    display: flex;
    flex-direction: column;
    align-items: center;
  }

  .item img {
    width: 200px;
    height: 200px;
    object-fit: cover;
    margin-bottom: 12px;
  }

  .item h3 {
    font-size: 20px;
    margin-bottom: 8px;
  }

  .item .price {
    color: #ef5b5b;
    font-weight: bold;
    margin-bottom: 8px;
  }

  .item .quantity-controls {
    display: flex;
    align-items: center;
    gap: 8px;
    margin-bottom: 12px;
  }

  .quantity-controls button {
    padding: 4px 8px;
    font-size: 16px;
  }

  .add-to-cart {
    background-color: #5ba7ef;
    color: #fff;
    border: none;
    padding: 8px 16px;
    cursor: pointer;
    border-radius: 4px;
    font-size: 16px;
  }

  /* Корзина */
  .cart-section {
    padding: 20px;
    display: none;
  }

  .cart-section h2 {
    margin-bottom: 20px;
  }

  .cart-item {
    display: flex;
    align-items: center;
    background: #fff;
    padding: 12px;
    margin-bottom: 10px;
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0,0,0,0.1);
  }

  .cart-item img {
    width: 80px;
    height: 80px;
    object-fit: cover;
    margin-right: 12px;
    border-radius: 4px;
  }

  .cart-item-details {
    flex: 1;
  }

  .cart-item-details p {
    margin-bottom: 4px;
  }

  .remove-btn {
    background: transparent;
    border: none;
    color: #5befef;
    font-weight: bold;
    cursor: pointer;
    font-size: 16px;
  }

  /* Итоговая цена */
  .total-price {
    font-size: 20px;
    font-weight: bold;
    margin-top: 20px;
    text-align: right;
  }
</style>
</head>
<body>

    <header>
  <h1>Наши товары</h1>
  <nav>
    <!-- Навигация по страницам -->
    <a href="index.html">Главная</a>
    <a href="about.html">О нас</a>
    <a href="jokes.html">Ваши шутки</a>
    <a href="game.html">Супер-игра</a>
   <a href="video.html">Видео</a>
   <a href="lessons.html">Занятия</a>
  </nav>
</header>

<div class="cart-box"></div>

<div class="cart-section">
  <h2>Товары в корзине</h2>
  <div class="cart-items"></div>
  <div class="total-price"></div>
</div>

<script src="data.js"></script>
<script>
const data = JSON.parse(dataProducts);
const cartBox = document.querySelector('.cart-box');
const cartItemsContainer = document.querySelector('.cart-items');
const cartSection = document.querySelector('.cart-section');
const totalPriceEl = document.querySelector('.total-price');

const cartItems = []; // массив для хранения товаров в корзине

// Создаем блоки товаров для добавления
data.forEach(element => {
  const itemEl = document.createElement('div');
  itemEl.className = 'item';

  const itemImg = document.createElement('img');
  itemImg.src = element.url;

  const itemName = document.createElement('h3');
  itemName.textContent = element.name;

  const itemPrice = document.createElement('div');
  itemPrice.className = 'price';
  itemPrice.textContent = `Price: ${element.price}`;

  // Контроль количества
  const quantityControls = document.createElement('div');
  quantityControls.className = 'quantity-controls';

  const btnMinus = document.createElement('button');
  btnMinus.textContent = '-';

  const quantityInput = document.createElement('input');
  quantityInput.type = 'number';
  quantityInput.value = 1;
  quantityInput.min = 1;
  quantityInput.style.width = '50px';

  const btnPlus = document.createElement('button');
  btnPlus.textContent = '+';

  quantityControls.appendChild(btnMinus);
  quantityControls.appendChild(quantityInput);
  quantityControls.appendChild(btnPlus);

  const addButton = document.createElement('button');
  addButton.className = 'add-to-cart';
  addButton.textContent = 'Добавить в корзину';

  // Собираем товар
  cartBox.appendChild(itemEl);
  itemEl.appendChild(itemImg);
  itemEl.appendChild(itemName);
  itemEl.appendChild(itemPrice);
  itemEl.appendChild(quantityControls);
  itemEl.appendChild(addButton);

  // Обработчики для + и -
  btnMinus.addEventListener('click', () => {
    if (parseInt(quantityInput.value) > 1) {
      quantityInput.value = parseInt(quantityInput.value) - 1;
    }
  });
  btnPlus.addEventListener('click', () => {
    quantityInput.value = parseInt(quantityInput.value) + 1;
  });

  // Обработчик добавления
  addButton.addEventListener('click', () => {
    const quantity = parseInt(quantityInput.value);
    const existingIndex = cartItems.findIndex(ci => ci.id === element.id);
    if (existingIndex !== -1) {
      // Если товар уже есть, увеличиваем количество
      cartItems[existingIndex].quantity += quantity;
    } else {
      // Новый товар
      cartItems.push({
        id: element.id,
        name: element.name,
        url: element.url,
        price: element.price,
        quantity: quantity
      });
    }
    updateCart();
  });
});

function updateCart() {
  cartItemsContainer.innerHTML = '';

  if (cartItems.length === 0) {
    document.querySelector('.cart-section').style.display = 'none';
    return;
  }
  document.querySelector('.cart-section').style.display = 'block';

  let totalSum = 0;

  cartItems.forEach(item => {
    const cartItemEl = document.createElement('div');
    cartItemEl.className = 'cart-item';

    const img = document.createElement('img');
    img.src = item.url;

    const detailsDiv = document.createElement('div');
    detailsDiv.className = 'cart-item-details';

    const nameEl = document.createElement('p');
    nameEl.textContent = item.name;

    const infoEl = document.createElement('p');
    const sum = parseFloat(item.price) * item.quantity;
    totalSum += sum;
    infoEl.textContent = `Price: ${item.price} × ${item.quantity} = ${sum.toFixed(2)}`;

    // Кнопка удаления
    const removeBtn = document.createElement('button');
    removeBtn.className = 'remove-btn';
    removeBtn.textContent = 'Удалить';

    removeBtn.addEventListener('click', () => {
      const index = cartItems.findIndex(ci => ci.id === item.id);
      if (index !== -1) {
        cartItems.splice(index, 1);
        updateCart();
      }
    });

    // Обновление количества
    const quantityControl = document.createElement('div');
    quantityControl.style.display = 'flex';
    quantityControl.style.alignItems = 'center';
    quantityControl.style.marginTop = '4px';

    const minusBtn = document.createElement('button');
    minusBtn.textContent = '-';
    minusBtn.style.marginRight = '4px';

    const qtySpan = document.createElement('span');
    qtySpan.textContent = `Кол-во: ${item.quantity}`;

    const plusBtn = document.createElement('button');
    plusBtn.textContent = '+';
    plusBtn.style.marginLeft = '4px';

    minusBtn.addEventListener('click', () => {
      if (item.quantity > 1) {
        item.quantity--;
        updateCart();
      }
    });
    plusBtn.addEventListener('click', () => {
      item.quantity++;
      updateCart();
    });

    quantityControl.appendChild(minusBtn);
    quantityControl.appendChild(qtySpan);
    quantityControl.appendChild(plusBtn);

    detailsDiv.appendChild(nameEl);
    detailsDiv.appendChild(infoEl);
    detailsDiv.appendChild(quantityControl);
    detailsDiv.appendChild(removeBtn);

    cartItemEl.appendChild(img);
    cartItemEl.appendChild(detailsDiv);

    cartItemsContainer.appendChild(cartItemEl);
  });

  document.querySelector('.total-price').textContent = `Общая сумма: ${totalSum.toFixed(2)} руб.`;
}
</script>

<footer>
  <p>&copy; 2025 Юмор IT-компании</p>
</footer>

</body>
</html>



